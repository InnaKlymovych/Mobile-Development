<!DOCTYPE html>
<html lang="en">

<head>
    

    <style>
        :root{--primary-color:#ffc80b;--secondary-color:#053160;--terciary-color:#031e3c;--quadriary-color:#FFE96D;--success-color:#37d402;--warning-color:#ff9e03;--error-color:#b66eac;--speed:.2s;--font-size:clamp(2.5rem, 3vw, 3.5rem);--font-bold:600;--font-light:300;--button-height:92px}::-webkit-scrollbar{width:0;opacity:0}*{padding:0;margin:0;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent}body,html{background-color:var(--terciary-color);max-width:100%;height:100vh}body{position:relative;display:flex;flex-direction:column;justify-content:space-between;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;background-color:var(--secondary-color);max-width:800px;height:100vh;margin:0 auto;row-gap:10px}label{color:var(--primary-color);font-size:var(--font-size);font-weight:var(--font-bold);text-transform:uppercase;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;flex:1}li label{color:var(--secondary-color)}button{display:flex;align-items:center;justify-content:center;border:none;background-color:transparent;cursor:pointer;max-width:100%;flex:1;padding:10px}button:active,li:active>*{scale:.9}input[type=range]{position:absolute;inset:0;opacity:0}input[type=file]{position:absolute;top:0;left:0;visibility:hidden;pointer-events:none}#info{display:flex;max-height:var(--button-height);flex:1}#info-container{position:absolute;inset:0;top:var(--button-height);bottom:var(--button-height);display:flex;overflow-x:hidden;overflow-y:scroll;background-color:var(--terciary-color);transform:scaleY(0);transform-origin:top;transition:transform var(--speed) ease;z-index:100}#controller{display:flex;justify-content:space-between;align-items:center;gap:10px;flex:1}#scrub{flex:2;height:20px;margin:5px;background-color:#b66eac}#volume{flex:1}.range{position:relative;display:flex;background-color:var(--terciary-color)}.range-bar{flex:1;transform-origin:left;transform:scaleX(.5);background-color:var(--primary-color);pointer-events:none;width:100%}#menu{display:flex;max-height:var(--button-height);flex:1;justify-self:end}#menu-container{position:absolute;inset:0;bottom:var(--button-height);display:flex;overflow-x:hidden;overflow-y:scroll;background-color:var(--quadriary-color);transform:scaleY(0);transform-origin:bottom;transition:transform var(--speed) ease;z-index:101}#menu-back-button{display:none}#menu-container ul{position:absolute;inset:0;display:flex;flex-direction:column;flex:1;list-style:none;background-color:var(--quadriary-color);transform:translateX(100%);transition:var(--speed) ease}#menu-container li{display:grid;grid-template-columns:auto 45px;max-height:72px;cursor:pointer;gap:10px;padding:10px;flex:1}#menu-container li.leaf{display:flex}li .toggle{justify-content:flex-end}#peek-a-boo{display:flex;justify-content:center;align-items:center;position:absolute;inset:0;max-height:32px;color:#fff;font-weight:500;font-size:12px;z-index:200;transform:translateY(-100%);animation-duration:var(--speed);animation-fill-mode:forwards}.toggle{display:flex;align-items:center}.toggle>*{display:none}@keyframes peekaboo{0%{transform:translateY(-100%)}100%{transform:translateY(0)}}
    </style>
    <script>
        class AudioPlayer{#t;#e=[];#n=0;currentState="pause";callback;constructor(t){this.#t=new Audio,this.callback=t,this.#s()}#s(){this.#t.onended=()=>{this.currentState="ended",this.callback(this.currentState),this.next()},this.#t.onpause=()=>{this.currentState="pause",this.callback(this.currentState)},this.#t.onerror=t=>{t.preventDefault(),this.currentState="error",this.callback(this.currentState,this.#t.error)},this.#t.onloadstart=()=>{this.currentState="loading",this.callback(this.currentState)},this.#t.onplaying=()=>{this.currentState="play",this.callback(this.currentState)}}previous(){this.#n--,this.#n<0&&(this.#n=this.#e.length-1),this.play(this.#e[this.#n],this.#e)}async play(t=null,e=null){this.#e=e||this.#e,this.currentTrack=t||this.currentTrack,this.#t.paused||this.#t.pause();try{return this.#t.src=this.#e[this.#n].url,await this.#t.play(),!0}catch(t){return this.currentState="error",!1}}pause(){this.#t.pause()}next(){this.#n++,this.#n>=this.#e.length&&(this.#n=0),this.play(this.#e[this.#n],this.#e)}get currentTrack(){return this.#e[this.#n]}set currentTrack(t){for(let e=0;e<this.#e.length;e++)if(this.#e[e].id===t.id){this.#n=e;break}}get volume(){return this.#t.volume}set volume(t){this.#t.volume=t/100}get time(){}set time(t){}}class Component{element;callback;SPEED=0;constructor(t=null,e=(()=>{})){this.element=document.querySelector(t),this.callback=e,this.SPEED=1e3*parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--speed").replace(/(ms|s)/g,""))}setElement(t){this.element=t}get displayed(){return"initial"===this.element.style.display}set displayed(t){let e;e=t?"initial":"none",this.element.style.display=e}}class Button extends Component{constructor(t,e){super(t,e),this.element&&(this.element.onclick=()=>this.callback())}setElement(t){super.setElement(t),this.element.onclick=()=>this.callback()}get text(){return this.element.querySelector("label").innerText}set text(t){this.element.querySelector("label").innerText=t}get color(){return this.element.querySelector("label").style.color}set color(t){this.element.querySelector("label").style.color=t}}class ToggleButton extends Button{#i;#a=0;constructor(t,e){super(t,e),this.#i=this.element.children,this.toggle(0)}toggle(t=null){this.#i[this.#a].style.display="none",null!==t?this.#a=t:(this.#a++,this.#a>=this.#i.length&&(this.#a=0)),this.#i[this.#a].style.display="block"}}class ListButton extends Button{#r;constructor(t,e){super(null,e),this.#r=t;const n=document.createElement("div"),s=document.querySelector(".list-item").content.cloneNode(!0);s.querySelector("label").textContent=this.#r.name,n.appendChild(s),this.setElement(n.children[0]);const i=n.querySelector(".toggle");"folder"===t.type?i.children[0].style.display="initial":(this.element.className="leaf",this.element.removeChild(i))}}class Info extends Component{#l;#o;#c=!1;constructor(t,e){super(t,e),this.#l=this.element.querySelector("#info-container"),this.#o=new ToggleButton("#info-button",(()=>{this.#c?this.close():this.open(),this.callback(this.#c)}))}update(t){this.#o.text=t.name,this.#o.color="error"===t.type?"var(--error-color)":"var(--primary-color)"}open(){this.#c||(this.#l.style.transform="scaleY(1)",this.#o.toggle(1),this.#c=!0)}close(){this.#c&&(this.#l.style.transform="scaleY(0)",this.#o.toggle(0),this.#c=!1)}}class Controller extends Component{currentState="pause";#u;constructor(t,e){super(t,e);new Button("#previous-button",(()=>{this.callback("previous")}));this.#u=new ToggleButton("#action-button",(()=>{"loading"!==this.currentState&&("pause"===this.currentState?this.callback("play"):this.callback("pause"))}));new Button("#next-button",(()=>{this.callback("next")}))}setState(t){this.currentState=t;let e=0;switch(this.currentState){case"play":e=1;break;case"pause":e=0;break;case"loading":e=2;break;case"error":e=3}this.#u.toggle(e)}}class RangeBar extends Component{#h;#p;constructor(t,e){super(t,e),this.#h=this.element.querySelector("input[type='range']"),this.#p=this.element.querySelector(".range-bar"),this.#h.oninput=()=>{this.value=this.#h.value,this.callback(this.value)},this.value=parseFloat(this.#h.value)}get value(){return parseFloat(this.#h.value)}set value(t){this.#p.style.transform=`scaleX(${t/100})`}}class Menu extends Component{#d;#m;#g;#y;#k=null;#b=!1;constructor(t,e){super(t,e),this.#g=new ToggleButton("#menu-button",(()=>{this.#b?this.close():this.open()})),this.#y=new Button("#menu-back-button",(()=>{const t=this.#m.children.length-1;this.#B(t)})),this.#m=this.element.querySelector("#menu-container")}#f(t){const e=document.createElement("ul");t.forEach((t=>{const n=new ListButton(t,(()=>{"folder"===t.type?this.#f(t.children):this.callback(t)}));e.appendChild(n.element)})),this.#k&&(this.#k.style.transform="translateX(-100%)"),this.#m.appendChild(e),this.#k=e,requestAnimationFrame((()=>this.#k.style.transform="translateX(0)")),this.#m.children.length>1?this.#y.displayed=!0:this.#y.displayed=!1}#B(t=null){if(null!==t){const e=this.#m.children[t];this.#m.removeChild(e),this.#k=this.#m.children[this.#m.children.length-1],this.#k.style.transform="translateX(0)"}else this.#m.innerHTML="",this.#k=null;this.#m.children.length>1?this.#y.displayed=!0:this.#y.displayed=!1}open(){this.#g.toggle(1),this.#m.style.transform="scaleY(1)",this.callback({type:"opening"}),setTimeout((()=>{this.#f(this.#d)}),this.SPEED),this.#b=!0}close(){this.#g.toggle(0),this.#B(),this.#m.style.transform="scaleY(0)",this.#b=!1}setTrail(t){this.#b}get data(){return this.#d}set data(t){this.#d=t}}let t,e,n,s,i,a,r,l;const o="https://purring-cyclic-jackrabbit.glitch.me/";window.onload=async()=>{await c(o),u(),h()};const c=async e=>{try{const n=await fetch(e,{headers:{"Accept-Encoding":"gzip"}}),s=await n.json();t=[...s,{type:"open",name:"open..."},{type:"reset",name:"reset"}]}catch(t){}},u=()=>{n=new PeekABoo("#peek-a-boo"),s=new Info("#info",(()=>{})),i=new Controller("#controller",(t=>{switch(t){case"play":e.currentTrack?e.play():l.open();break;case"pause":e.pause();break;case"next":e.next();break;case"previous":e.previous()}})),a=new RangeBar("#scrub",(()=>{})),r=new RangeBar("#volume",(t=>{e.volume=t})),l=new Menu("#menu",(async i=>{switch(i.type){case"opening":s.close();break;case"music":case"file":l.close(),await e.play(i,p(t,i.id));break;case"open":document.querySelector("#file-input").click();break;case"reset":l.close(),await c(`${o}/reset`),l.data=t,n.show("Data updated!")}})),l.data=t;const u=document.querySelector("#file-input");u.onchange=async()=>{const t=[];Array.from(u.files).forEach((e=>{t.push({id:e.name,name:e.name,url:URL.createObjectURL(e)})})),l.close(),await e.play(t[0],t)}},h=()=>{e=new AudioPlayer(((t,n=null)=>{switch(i.setState(t),t){case"error":s.update({name:e.currentTrack.name,type:"error",error:n});break;case"play":l.setTrail(e.currentTrack.id.split("/"))}"error"!==t&&s.update(e.currentTrack)})),e.volume=r.value},p=(t,e)=>{let n=null;for(let s=0;s<t.length;s++){const i=t[s];if(i.children?n=p(i.children,e):i.id===e&&(n=t),n)break}return n};
    </script>
</head>

<body>
    
</body>

</html>